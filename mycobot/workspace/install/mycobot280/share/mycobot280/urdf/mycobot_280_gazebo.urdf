<?xml version="1.0"?>
<robot name="mycobot_280_gazebo">

  <!-- Fix the base to world -->
  <link name="world"/>
  <joint name="world_to_base" type="fixed">
    <parent link="world"/>
    <child link="g_base"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <!-- ===== Base link ===== -->
  <link name="g_base">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/G_base.dae"/>
      </geometry>
      <origin xyz="0 0 -0.03" rpy="0 0 1.5708"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.08 0.08 0.04"/>
      </geometry>
      <origin xyz="0 0 -0.03" rpy="0 0 1.5708"/>
    </collision>
    <inertial>
      <mass value="0.33"/>
      <inertia ixx="0.000784" ixy="0" ixz="0" iyy="0.000867" iyz="0" izz="0.001598"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 1 ===== -->
  <link name="joint1">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint1_pi_fixed.stl"/>
      </geometry>
      <origin xyz="0 0 0" rpy="1.5708 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.06 0.06 0.06"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.12"/>
      <inertia ixx="0.000074" ixy="0" ixz="0" iyy="0.000086" iyz="0" izz="0.000137"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 2 ===== -->
  <link name="joint2">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint2.dae"/>
      </geometry>
      <origin xyz="0 0 -0.06096" rpy="0 0 -1.5708"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.05 0.08"/>
      </geometry>
      <origin xyz="0 0 -0.06096" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.19"/>
      <inertia ixx="0.000098" ixy="0" ixz="0" iyy="0.000113" iyz="0" izz="0.000185"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 3 ===== -->
  <link name="joint3">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint3.dae"/>
      </geometry>
      <origin xyz="0 0 0.03256" rpy="0 -1.5708 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.05 0.06"/>
      </geometry>
      <origin xyz="0 0 0.03" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.09"/>
      <inertia ixx="0.000035" ixy="0" ixz="0" iyy="0.000042" iyz="0" izz="0.000065"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 4 ===== -->
  <link name="joint4">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint4.dae"/>
      </geometry>
      <origin xyz="0 0 0.03056" rpy="0 -1.5708 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.05 0.05 0.05"/>
      </geometry>
      <origin xyz="0 0 0.03" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.08"/>
      <inertia ixx="0.000022" ixy="0" ixz="0" iyy="0.000026" iyz="0" izz="0.000040"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 5 ===== -->
  <link name="joint5">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint5_fixed.stl"/>
      </geometry>
      <origin xyz="0 -0.001 -0.0345" rpy="0 -1.5708 3.1416"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.04 0.04 0.04"/>
      </geometry>
      <origin xyz="0 0 -0.03" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.06"/>
      <inertia ixx="0.000015" ixy="0" ixz="0" iyy="0.000018" iyz="0" izz="0.000027"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joint 6 ===== -->
  <link name="joint6">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint6.dae"/>
      </geometry>
      <origin xyz="0 0 -0.038" rpy="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.04 0.04 0.04"/>
      </geometry>
      <origin xyz="0 0 -0.03" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.045"/>
      <inertia ixx="0.000010" ixy="0" ixz="0" iyy="0.000011" iyz="0" izz="0.000017"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Flange ===== -->
  <link name="joint6_flange">
    <visual>
      <geometry>
        <mesh filename="package://mycobot_description/urdf/mycobot_280_pi/joint7.dae"/>
      </geometry>
      <origin xyz="0 0 -0.012" rpy="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <box size="0.03 0.03 0.03"/>
      </geometry>
      <origin xyz="0 0 -0.012" rpy="0 0 0"/>
    </collision>
    <inertial>
      <mass value="0.025"/>
      <inertia ixx="0.000006" ixy="0" ixz="0" iyy="0.000007" iyz="0" izz="0.000011"/>
      <origin xyz="0 0 0" rpy="0 0 0"/>
    </inertial>
  </link>

  <!-- ===== Joints ===== -->
  <joint name="g_base_to_joint1" type="fixed">
    <parent link="g_base"/>
    <child link="joint1"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
  </joint>

  <joint name="joint2_to_joint1" type="revolute">
    <parent link="joint1"/>
    <child link="joint2"/>
    <origin xyz="0 0 0.13956" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.9322" upper="2.9322" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>

  <joint name="joint3_to_joint2" type="revolute">
    <parent link="joint2"/>
    <child link="joint3"/>
    <origin xyz="0 0 -0.001" rpy="0 1.5708 -1.5708"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.3562" upper="2.3562" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>

  <joint name="joint4_to_joint3" type="revolute">
    <parent link="joint3"/>
    <child link="joint4"/>
    <origin xyz="-0.1104 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.618" upper="2.618" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>

  <joint name="joint5_to_joint4" type="revolute">
    <parent link="joint4"/>
    <child link="joint5"/>
    <origin xyz="-0.096 0 0.06462" rpy="0 0 -1.5708"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.5307" upper="2.5307" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>

  <joint name="joint6_to_joint5" type="revolute">
    <parent link="joint5"/>
    <child link="joint6"/>
    <origin xyz="0 -0.07318 -0.001" rpy="1.5708 -1.5708 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-2.8798" upper="2.8798" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>

  <joint name="joint6output_to_joint6" type="revolute">
    <parent link="joint6"/>
    <child link="joint6_flange"/>
    <origin xyz="0 0.0456 0" rpy="-1.5708 0 0"/>
    <axis xyz="0 0 1"/>
    <limit lower="-3.14159" upper="3.14159" effort="5.0" velocity="2.0"/>
    <dynamics damping="0.05" friction="0.01"/>
  </joint>


  <!-- ===== ROSâ€“Gazebo Control Plugin ===== -->
  <gazebo>
    <plugin name="gz_ros2_control::GazeboSimROS2ControlPlugin"
            filename="libgz_ros2_control-system.so">
      <parameters>/home/tejas/mycobot/workspace/src/mycobot280/config/mycobot_280_controllers.yaml</parameters>
    </plugin>
  </gazebo>


  <!-- ===== ros2_control definition ===== -->
  <ros2_control name="MycobotSystem" type="system">
    <hardware>
      <plugin>gz_ros2_control/GazeboSimSystem</plugin>
      <param name="enable_joint_filtering">true</param>
    </hardware>

    <!-- Only revolute (movable) joints should be here -->
    <joint name="joint2_to_joint1">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="joint3_to_joint2">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="joint4_to_joint3">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="joint5_to_joint4">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="joint6_to_joint5">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>

    <joint name="joint6output_to_joint6">
      <command_interface name="position"/>
      <state_interface name="position"/>
      <state_interface name="velocity"/>
      <state_interface name="effort"/>
    </joint>
  </ros2_control>
</robot>
